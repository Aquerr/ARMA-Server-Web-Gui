<mat-accordion>
  <mat-expansion-panel hideToggle [(expanded)]="expanded" class="mod-list-item-expansion-panel">
    <mat-expansion-panel-header
      [collapsedHeight]="'4rem'"
      class="mod-list-item-expansion-panel-header"
      [ngStyle]="expanded ? { 'background-color': 'var(--aswg-input-bg-color)' } : null"
    >
      <mat-panel-title class="mod-list-item-expansion-panel-title">
        <div>
          <span>
            {{ mod.name }}
          </span>
          <div style="filter: brightness(50%)">
            <span>Last update attempt: </span>
            <span>{{ mod.lastWorkshopUpdateAttemptDateTime }}</span>
          </div>
        </div>
      </mat-panel-title>
      <mat-panel-description
        class="mod-list-item-expansion-panel-header-description"
      >
        <div>
          <span style="filter: brightness(50%); white-space: nowrap;">{{ mod.sizeBytes | filesize }}</span>
        </div>
        @if (mod.status === modStatus.MISSING_FILES) {
        } @else if (mod.status === modStatus.MISSING_DEPENDENCY_MODS) {
          <mat-icon matTooltip="Missing dependencies" [color]="'warn'" style="margin-left: 10px">warning</mat-icon>
        }
      </mat-panel-description>
    </mat-expansion-panel-header>
    <div class="mod-list-item-inner-panel">
      <a class="image-wrapper" [href]="mod.workshopUrl" target="_blank">
        @if (mod.previewUrl) {
          <img [ngSrc]="mod.previewUrl" [width]="200" [height]="200" alt="No Image" style="object-fit: fill" />
        } @else {
          <img [src]="mod.previewUrl" [width]="200" [height]="200" alt="No Image" />
        }
      </a>
      <div class="mod-list-item-inner-panel-details">
        <div class="mod-list-item-inner-panel-details-directory">
          <p><strong>Directory:</strong> {{ mod.directoryName }}</p>
          <p><strong>Last update at workshop:</strong> {{ mod.lastWorkshopUpdateDateTime }}</p>
        </div>
        <div class="mod-list-item-inner-panel-actions-action">
          <mat-checkbox [checked]="mod.serverMod" (change)="mod.serverMod = !mod.serverMod">Server Mod</mat-checkbox>
        </div>
        <div class="mod-list-item-inner-panel-buttons">
          <div class="mod-list-item-inner-panel-actions-action">
            <button
              mat-icon-button
              matTooltip="Force update the mod"
              (click)="showForceUpdateConfirmationDialog(mod.workshopFileId, mod.name)"
            >
              <mat-icon>update</mat-icon>
            </button>
          </div>
          <div class="mod-list-item-inner-panel-actions-action">
            <button
              mat-icon-button
              matTooltip="Delete the mod"
              (click)="showModDeleteConfirmationDialog(mod.name)"
            >
              <mat-icon>delete</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </div>
  </mat-expansion-panel>
</mat-accordion>
